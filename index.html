<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="electangular.js : AngularJS Module for Atom Electron">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>electangular.js</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/develephant/electangular">View on GitHub</a>

          <h1 id="project_title">electangular.js</h1>
          <h2 id="project_tagline">AngularJS Module for Atom Electron</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/develephant/electangular/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/develephant/electangular/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>Use <strong>electangular.js</strong> in your <strong><a href="http://electron.atom.io/">Electron</a></strong> apps to easily access Electron based functionality in your <strong><a href="https://angularjs.org/">AngularJS</a></strong> code.</p>

<p>Some additional service methods for IPC functionality are incorporated, as well as <code>Promise</code> based <code>dialog</code> module methods.</p>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h3>

<p><strong>1. Download and move the <code>electangular.js</code> file into your Electron project.</strong></p>

<p><strong>2. Load the script in the main Electron <code>index.html</code> after your Angular import.</strong></p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">html</span>&gt;
  ...

<span class="pl-s1">  &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">'</span>./js/angular.min.js<span class="pl-pds">'</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
<span class="pl-s1">  &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">'</span>./js/electangular.js<span class="pl-pds">'</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span> <span class="pl-c">&lt;!-- you are here --&gt;</span>
<span class="pl-s1">  &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">'</span>./my_ng_app.js<span class="pl-pds">'</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
  &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p><strong>3. Inject the module into your Angular <code>app</code> code.</strong></p>

<div class="highlight highlight-source-js"><pre><span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;
<span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>electangular<span class="pl-pds">'</span></span>]); <span class="pl-c">// welcome to the team</span>

<span class="pl-k">...</span></pre></div>

<h3>
<a id="services" class="anchor" href="#services" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Services</h3>

<p>The <strong>electangular</strong> module exposes two public services that can be used in your Angular project.</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>electron</code></td>
<td>A collection of Electron functionality for access within AngularJS.</td>
</tr>
<tr>
<td><code>ipc</code></td>
<td>Facilitates IPC communication between the <code>main</code> process and <code>renderer</code> process.</td>
</tr>
</tbody>
</table>

<hr>

<h4>
<a id="electron-service" class="anchor" href="#electron-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>electron</code> Service</h4>

<p>An example of using the <code>electron</code> service in an Angular controller:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;
<span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>electangular<span class="pl-pds">'</span></span>]) <span class="pl-c">// don't forget electangular</span>

.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>MainController<span class="pl-pds">"</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>$scope<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>electron<span class="pl-pds">'</span></span>,
<span class="pl-k">function</span>(<span class="pl-smi">$scope</span>, <span class="pl-smi">electron</span>) {
  <span class="pl-smi">$scope</span>.<span class="pl-en">doBeep</span> <span class="pl-k">=</span> <span class="pl-k">function</span>() {
    <span class="pl-smi">electron</span>.<span class="pl-smi">shell</span>.<span class="pl-en">beep</span>();
  }

  <span class="pl-smi">$scope</span>.<span class="pl-en">showError</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-smi">electron</span>.<span class="pl-smi">dialog</span>.<span class="pl-en">showErrorBox</span>(<span class="pl-s"><span class="pl-pds">'</span>Error Title<span class="pl-pds">'</span></span>, err);
  }
}]);</pre></div>

<p>In the code above, when the <code>doBeep</code> method is triggered, Electron will make the machine perform a system beep. When <code>showErrorBox</code> is called, a dialog box will be presented to the user.</p>

<h4>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h4>

<p>The supported Electron modules can be found in the <code>electron</code> service namespace. Refer to the <a href="http://electron.atom.io/docs/">Electron documentation</a> for more details on the functionality each module provides.</p>

<p>Because AngularJS runs in the <code>renderer</code> process, access to the <code>main</code> process is provided via <code>electron.remote</code> and all rules for that module apply. (<a href="http://electron.atom.io/docs/api/remote/">See <code>remote</code> docs.</a>)</p>

<h5>
<a id="electron-module-table" class="anchor" href="#electron-module-table" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Electron Module Table</h5>

<table>
<thead>
<tr>
<th>Module</th>
<th>Process</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Accelerator</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>app</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>autoUpdater</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>BrowserWindow</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>contentTracing</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>dialog</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>globalShortcut</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>Menu</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>MenuItem</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>powerMonitor</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>powerSaveBlocker</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>protocol</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>session</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>systemPreferences</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>Tray</code></td>
<td>Main</td>
</tr>
<tr>
<td><code>desktopCapturer</code></td>
<td>Renderer</td>
</tr>
<tr>
<td><code>webFrame</code></td>
<td>Renderer</td>
</tr>
<tr>
<td><code>clipboard</code></td>
<td>Both</td>
</tr>
<tr>
<td><code>crashReporter</code></td>
<td>Both</td>
</tr>
<tr>
<td><code>nativeImage</code></td>
<td>Both</td>
</tr>
<tr>
<td><code>process</code></td>
<td>Both</td>
</tr>
<tr>
<td><code>screen</code></td>
<td>Both</td>
</tr>
<tr>
<td><code>shell</code></td>
<td>Both</td>
</tr>
</tbody>
</table>

<hr>

<h4>
<a id="dialog-module-promises" class="anchor" href="#dialog-module-promises" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>dialog</code> Module Promises</h4>

<p>Some Electron methods, like <code>dialog.showMessageBox</code>, use a callback. For Angular, we wrap the <code>$q</code> service to handle this properly using promises. This requires a slightly different signature for the <code>dialog</code> methods.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">...</span>

.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>MainController<span class="pl-pds">"</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>$scope<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>electron<span class="pl-pds">'</span></span>,
<span class="pl-k">function</span>(<span class="pl-smi">$scope</span>, <span class="pl-smi">electron</span>) {
  <span class="pl-smi">$scope</span>.<span class="pl-en">showMessage</span> <span class="pl-k">=</span> <span class="pl-k">function</span>() {
    <span class="pl-smi">electron</span>.<span class="pl-smi">dialog</span>.<span class="pl-en">showMessageBox</span>({
      title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Title<span class="pl-pds">'</span></span>,
      description<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>This is some descriptive message<span class="pl-pds">'</span></span>,
      buttons<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>Cancel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>OK<span class="pl-pds">'</span></span>],
      cancelId<span class="pl-k">:</span> <span class="pl-c1">0</span>,
      defaultId<span class="pl-k">:</span> <span class="pl-c1">1</span>
    }).<span class="pl-en">then</span>((<span class="pl-smi">result</span>) <span class="pl-k">=&gt;</span> { <span class="pl-c">//Promise, not callback.</span>
      <span class="pl-en">console</span>.<span class="pl-c1">log</span>(result);
    }, () <span class="pl-k">=&gt;</span> {
      <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>);
    });
  }
}]);</pre></div>

<p>The <code>dialog</code> methods use the same signature as shown in the Electron docs, except for the callback. Instead the following methods return a <code>Promise</code> when using <strong>electangular</strong>.</p>

<ul>
<li><code>showOpenDialog</code></li>
<li><code>showSaveDialog</code></li>
<li><code>showMessageBox</code></li>
</ul>

<p>Replacing callbacks with Promises is fairly simple:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//Do not include a callback</span>
<span class="pl-smi">dialog</span>.<span class="pl-en">showSaveDialog</span>({ <span class="pl-c">//Set up as usual</span>
  title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Save Me<span class="pl-pds">'</span></span>,
  defaultPath<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>home<span class="pl-pds">'</span></span>,
  buttonLabel<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>OK<span class="pl-pds">'</span></span>
}).<span class="pl-en">then</span>((<span class="pl-smi">result</span>) <span class="pl-k">=&gt;</span> { <span class="pl-c">//Op was successful</span>
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(result); <span class="pl-c">//The save file path</span>
}, () <span class="pl-k">=&gt;</span> { <span class="pl-c">//Something went wrong</span>
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>oh no!<span class="pl-pds">'</span></span>);
});</pre></div>

<blockquote>
<p><strong>Note:</strong> <code>dialog.showErrorBox</code> does not use a callback or <code>Promise</code>.</p>
</blockquote>

<div class="highlight highlight-source-js"><pre><span class="pl-k">...</span>

.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>MainController<span class="pl-pds">"</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>electron<span class="pl-pds">'</span></span>,
<span class="pl-k">function</span>(<span class="pl-smi">electron</span>) {
  <span class="pl-smi">electron</span>.<span class="pl-smi">dialog</span>.<span class="pl-en">showErrorBox</span>(<span class="pl-s"><span class="pl-pds">"</span>Error Title<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Error Description<span class="pl-pds">"</span></span>);
}]);</pre></div>

<p><strong>Window Target</strong></p>

<p>Most of the <code>dialog</code> methods allow you to optionally pass a <code>browserWindow</code> instance where the dialog should be rendered. For example, the signature for <code>showMessageBox</code>:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">dialog</span>.<span class="pl-en">showMessageBox</span>([browserWindow,] options [,callback]);</pre></div>

<p>If you do not specifically pass a window reference, then the currently focused window will render the dialog.</p>

<p>On OS X you can also use "sheets" by passing a <code>null</code> type to the <code>browserWindow</code> parameter:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//Dialog will show as OS X sheet (Promise shown)</span>
<span class="pl-smi">dialog</span>.<span class="pl-en">showMessageBox</span>(<span class="pl-c1">null</span>, options).<span class="pl-en">then</span>((<span class="pl-smi">result</span>) <span class="pl-k">=&gt;</span> {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(result);
}, () <span class="pl-k">=&gt;</span> {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>);
});</pre></div>

<hr>

<h4>
<a id="ipc-service" class="anchor" href="#ipc-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>ipc</code> Service</h4>

<p>You can "wire" in your Angular app with the IPC (inter-process communication) system that Electron exposes using the <strong>electangular</strong> <code>icp</code> service.</p>

<p>An example of using the <code>ipc</code> service in an Angular controller:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">...</span>

.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>MainController<span class="pl-pds">"</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>ipc<span class="pl-pds">'</span></span>,
<span class="pl-k">function</span>(<span class="pl-smi">ipc</span>) {
  <span class="pl-c">//send a message to main process</span>
  <span class="pl-smi">ipc</span>.<span class="pl-c1">send</span>(<span class="pl-s"><span class="pl-pds">"</span>Here is a message to main<span class="pl-pds">"</span></span>);
}])</pre></div>

<h4>
<a id="setting-up-electron" class="anchor" href="#setting-up-electron" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting Up Electron</h4>

<p><strong>1. Add the following to the top of your <code>main.js</code>:</strong></p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">...</span>
<span class="pl-k">const</span> {<span class="pl-c1">ipcMain</span>} <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>electron<span class="pl-pds">'</span></span>).<span class="pl-smi">ipcMain</span>;

<span class="pl-k">...</span></pre></div>

<p><strong>2. Add the following listener to the <code>main.js</code> apps 'ready' event code:</strong></p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">...</span>

<span class="pl-smi">app</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>ready<span class="pl-pds">'</span></span>, () <span class="pl-k">=&gt;</span> {
  <span class="pl-k">...</span>

  <span class="pl-smi">ipcMain</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>electron-msg<span class="pl-pds">'</span></span>, (<span class="pl-c1">event</span>, <span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-c">//handle incoming message here</span>
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(msg);

    <span class="pl-c">//message can be an Object</span>
    <span class="pl-k">if</span> (<span class="pl-smi">msg</span>.<span class="pl-smi">username</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>dude<span class="pl-pds">'</span></span>) {
      <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">msg</span>.<span class="pl-smi">access_level</span>);
    }
  });
})</pre></div>

<p><strong>3. Send a message from the <code>main</code> process to the <code>renderer</code>:</strong></p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">...</span>

<span class="pl-smi">app</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>ready<span class="pl-pds">'</span></span>, () <span class="pl-k">=&gt;</span> {
  <span class="pl-k">...</span>

  win <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">BrowserWindow</span>(<span class="pl-k">...</span>)
  <span class="pl-c">//send message</span>
  <span class="pl-smi">win</span>.<span class="pl-smi">webContents</span>.<span class="pl-c1">send</span>(<span class="pl-s"><span class="pl-pds">'</span>electron-msg<span class="pl-pds">'</span></span>, msg);
})</pre></div>

<hr>

<h4>
<a id="setting-up-angular" class="anchor" href="#setting-up-angular" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting Up Angular</h4>

<p>When the <strong>electangular</strong> module is first initialized it will broadcast incoming messages from the <code>main</code> process. You can listen for these messages, which use the Angular <code>$rootScope</code> event emitter.</p>

<p>An example of listening to the <code>main</code> process in a controller:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;
<span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>electangular<span class="pl-pds">'</span></span>])

.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>MainController<span class="pl-pds">"</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>$rootScope<span class="pl-pds">'</span></span>,
<span class="pl-k">function</span>(<span class="pl-smi">$rootScope</span>) {
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>electron-msg<span class="pl-pds">'</span></span>, (<span class="pl-c1">event</span>, <span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(msg);
  });
}]);</pre></div>

<p>If you prefer to handle the messaging at a central point, you can add the listener to the <code>run</code> method of your Angular app:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;
<span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>electangular<span class="pl-pds">'</span></span>])

.<span class="pl-en">run</span>([<span class="pl-s"><span class="pl-pds">'</span>$rootScope<span class="pl-pds">'</span></span>,
<span class="pl-k">function</span>(<span class="pl-smi">$rootScope</span>) {
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>electron-msg<span class="pl-pds">'</span></span>, (<span class="pl-c1">event</span>, <span class="pl-smi">msg</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-k">switch</span> (msg) { <span class="pl-c">//Traffic cop</span>
      <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">'</span>msg1<span class="pl-pds">'</span></span><span class="pl-k">:</span>
        <span class="pl-c">//do something</span>
        <span class="pl-k">break</span>;
      <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">'</span>msg2<span class="pl-pds">'</span></span><span class="pl-k">:</span>
        <span class="pl-c">//something else</span>
        <span class="pl-k">break</span>;
      <span class="pl-k">default</span><span class="pl-k">:</span>
        <span class="pl-c">//whatever</span>
      }
    }
  }
}]);</pre></div>

<hr>

<p>©2016 develephant <g-emoji alias="elephant" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f418.png">🐘</g-emoji></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">electangular.js maintained by <a href="https://github.com/develephant">develephant</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
